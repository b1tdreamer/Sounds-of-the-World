<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<title>Sounds of the World | A sound map of the world #soundscapes #streetmusic</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<meta name="description" content="A map created to share the sonorous wealth of our planet. You will be able to find different varieties of sounds, of near and far places, sounds of nature, musics, soundscapes, etc.">
<meta name="keywords" content="world, map, sounds, soundscapes, music">
<meta name="author" content="b1tdreamer">
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="css/soundsoftheworld.css">
<link rel="apple-touch-icon" sizes="180x180" href="img/180icon.png">
<link rel="manifest" href="img/192icon.png">
<link rel="icon" href="img/64icon.png">
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.css' rel='stylesheet' />
<link href='css/sotw.css' rel='stylesheet' />
</head>
<body>
	<div class="logo"><img src="img/SoundsOfTheWorld.png" alt="Sounds of the World logo"/></div>
	<div id='map'></div>
<script>
mapboxgl.accessToken = "pk.eyJ1IjoiYjF0ZHJlYW1lciIsImEiOiJjazNrc2R2ZTkwOXQ3M2pxcWN3NHF2eWg3In0.Q_eYKI5Jv6EJH_5Bc97lFw"
var map = new mapboxgl.Map({
	container: 'map', // container id
	style: 'mapbox://styles/b1tdreamer/ck3othd2m0p9c1cp0qg1uln74', // b1t stylesheet location
	//style: 'mapbox://styles/mapbox/streets-v11', // stylesheet location
	center: [2, -2], // starting position [lng, lat]
	zoom: 2 // starting zoom
});

map.on('click', function(e) {
  var features = map.queryRenderedFeatures(e.point, {
    layers: ['street-music','nature','soundscapes','people-praying'] // replace this with the name of the layer
  });

  if (!features.length) {
    return;
  }

  var feature = features[0];

  var popup = new mapboxgl.Popup({ offset: [0, -15] })
    .setLngLat(feature.geometry.coordinates)
    .setHTML('<h3>' + feature.properties.name + '</h3><p>' + feature.properties.description + '</p>' +	'<iframe width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/' + feature.properties.audio_id + '&color=%f6b100&auto_play=true&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true"></iframe>')
    .addTo(map);
});
</script>
</body>
</html>
